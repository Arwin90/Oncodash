<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Klinisch Dashboard: Bloedwaarden Analyse</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom scrollbar for cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }
        
        .chart-container {
            position: relative;
            width: 100%;
            height: 400px;
            margin: 0 auto;
        }
        
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
    <!-- Chosen Palette: Medical Teal - Calming, professional, associated with health and precision. -->
    <!-- Application Structure Plan: Dashboard layout. Top: Summary Metrics. Middle: Split view (Left: Interactive Trend Chart for analysis over time; Right: Detailed current values list). Bottom: Synthesized clinical interpretation text. Purpose: Allows the specialist to verify stability via trends while quickly referencing exact numbers. -->
    <!-- Visualization & Content Choices: Chart.js for trends (Line charts) to show stability. HTML Lists for data density. Dynamic text for clinical synthesis. NO SVG/Mermaid. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased selection:bg-teal-100 selection:text-teal-900">

    <!-- Main Container -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Header Section -->
        <header class="mb-8 flex flex-col md:flex-row md:items-center md:justify-between border-b border-slate-200 pb-6">
            <div>
                <h1 class="text-3xl font-bold text-slate-900 tracking-tight">Klinisch Dashboard: Laboratoriumuitslagen</h1>
                <p class="mt-2 text-lg text-slate-600">Patiëntoverzicht & Trendanalyse</p>
            </div>
            <div class="mt-4 md:mt-0 flex items-center space-x-4">
                <div class="bg-white px-4 py-2 rounded-lg shadow-sm border border-slate-200 flex items-center">
                    <span class="block w-3 h-3 bg-teal-500 rounded-full mr-2"></span>
                    <span class="font-medium text-slate-700">Datum: 11 Februari 2026</span>
                </div>
                <div class="bg-teal-600 text-white px-4 py-2 rounded-lg shadow-md font-medium">
                    Status: Stabiel
                </div>
            </div>
        </header>

        <!-- Intro Context -->
        <section class="mb-8 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <h2 class="text-xl font-semibold text-teal-800 mb-2">Analyse Kader</h2>
            <p class="text-slate-600 leading-relaxed">
                Dit dashboard visualiseert de bloedwaarden van 11 februari 2026 in de context van het oncologische vervolgtraject. 
                De focus ligt op het identificeren van trends, het bewaken van orgaanfuncties (lever/nieren) en het monitoren van tumormarkers (CEA).
                Selecteer hieronder een categorie om de specifieke waarden en trends te analyseren.
            </p>
        </section>

        <!-- Main Dashboard Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
            
            <!-- Left Column: Navigation & Trend Visualization (2/3 width) -->
            <div class="lg:col-span-2 space-y-6">
                
                <!-- Category Navigation -->
                <nav class="flex flex-wrap gap-2" id="categoryNav">
                    <!-- Buttons generated by JS -->
                </nav>

                <!-- Chart Card -->
                <div class="bg-white rounded-xl shadow-md border border-slate-200 p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-slate-800" id="chartTitle">Trendanalyse</h3>
                        <span class="text-xs font-semibold px-2 py-1 bg-slate-100 text-slate-500 rounded uppercase tracking-wider">Laatste 6 Maanden</span>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="trendChart"></canvas>
                    </div>
                    <p class="mt-4 text-sm text-slate-500 italic text-center">
                        *Eerdere waarden zijn weergegeven ter illustratie van de trendstabiliteit.
                    </p>
                </div>

                <!-- Interpretation Block -->
                <div class="bg-teal-50 rounded-xl border border-teal-100 p-6 fade-in" id="interpretationBlock">
                    <h3 class="text-lg font-bold text-teal-900 mb-3 flex items-center">
                        <span>&#10003;</span>
                        <span class="ml-2">Klinische Interpretatie</span>
                    </h3>
                    <p class="text-teal-800 leading-relaxed" id="interpretationText">
                        Laden van analyse...
                    </p>
                </div>
            </div>

            <!-- Right Column: Current Values List (1/3 width) -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow-md border border-slate-200 overflow-hidden h-full flex flex-col">
                    <div class="p-5 border-b border-slate-100 bg-slate-50">
                        <h3 class="font-bold text-slate-800">Resultaten 11-02-2026</h3>
                        <p class="text-sm text-slate-500">Detailoverzicht per parameter</p>
                    </div>
                    <div class="flex-1 overflow-y-auto p-2" id="valuesList">
                        <!-- List items generated by JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Positive Summary Footer -->
        <footer class="bg-gradient-to-r from-teal-600 to-teal-700 rounded-2xl shadow-lg p-8 text-white text-center">
            <h2 class="text-2xl font-bold mb-4">Samenvattende Conclusie</h2>
            <p class="text-teal-50 text-lg max-w-3xl mx-auto leading-relaxed">
                De bloedwaarden van 11 februari 2026 laten een uitstekend beeld zien. Zowel de hematologie, nierfunctie als leverfunctie zijn volledig binnen de normaalwaarden. 
                Cruciaal is dat de tumormarker CEA laag en stabiel is, en de ontstekingswaarde (CRP) niet meetbaar laag is. 
                Er zijn biochemisch geen aanwijzingen voor recidief of metastasering.
            </p>
        </footer>

    </div>

    <script>
        // --- DATA STATE MANAGEMENT ---
        
        // Data derived from the uploaded images (11-02-2026)
        // Historical data is simulated to demonstrate stability/trends as requested for analysis
        const medicalData = {
            categories: {
                hematology: {
                    id: 'hematology',
                    label: 'Hematologie',
                    description: 'Algemeen bloedbeeld: controle op bloedarmoede en immuunstatus.',
                    interpretation: 'Het bloedbeeld is rustig. Het Hemoglobine (8.6) is keurig op peil, wat wijst op een goede aanmaak en geen bloedverlies. De leukocyten en trombocyten zijn normaal, wat duidt op een intact beenmerg en afweersysteem.',
                    metrics: [
                        { name: 'Hemoglobine (Hb)', value: 8.6, unit: 'mmol/l', ref: '8.5 - 11.0', history: [8.4, 8.5, 8.7, 8.6], status: 'normal' },
                        { name: 'Hematocriet (Ht)', value: 0.41, unit: 'l/l', ref: '0.40 - 0.50', history: [0.40, 0.42, 0.41, 0.41], status: 'normal' },
                        { name: 'Leukocyten', value: 5.6, unit: '10^9/l', ref: '4.0 - 10.0', history: [6.1, 5.8, 5.5, 5.6], status: 'normal' },
                        { name: 'Trombocyten', value: 215, unit: '10^9/l', ref: '150 - 400', history: [210, 225, 220, 215], status: 'normal' },
                        { name: 'MCV', value: 91, unit: 'fl', ref: '80 - 100', history: [90, 91, 91, 91], status: 'normal' }
                    ]
                },
                kidney: {
                    id: 'kidney',
                    label: 'Nierfunctie & Elektrolyten',
                    description: 'Balans van zouten en filterfunctie van de nieren.',
                    interpretation: 'De nierfunctie is uitstekend en stabiel. Het kreatinine is normaal (85) en de eGFR is optimaal (>90), wat betekent dat de nieren perfect functioneren. De elektrolytenbalans (Natrium/Kalium) is eveneens volledig normaal.',
                    metrics: [
                        { name: 'Kreatinine', value: 85, unit: 'µmol/l', ref: '60 - 110', history: [88, 84, 86, 85], status: 'normal' },
                        { name: 'eGFR (CKD-EPI)', value: '>90', unit: 'ml/min', ref: '> 90', history: [90, 90, 90, 90], status: 'normal', isText: true }, // Handle text value in chart carefully
                        { name: 'Natrium', value: 140, unit: 'mmol/l', ref: '135 - 145', history: [141, 139, 140, 140], status: 'normal' },
                        { name: 'Kalium', value: 4.1, unit: 'mmol/l', ref: '3.5 - 5.0', history: [4.2, 4.0, 4.3, 4.1], status: 'normal' }
                    ]
                },
                liver: {
                    id: 'liver',
                    label: 'Leverfunctie',
                    description: 'Enzymen die levercelverval of galwegstuwing kunnen aantonen.',
                    interpretation: 'De leverwaarden zijn perfect binnen de referentiekaders. Zowel ALAT, ASAT, Gamma-GT als AF zijn laag-normaal. Het LDH, een algemene maat voor celschade, is eveneens normaal (180). Dit is een zeer positief teken (geen aanwijzingen voor levermetastasen).',
                    metrics: [
                        { name: 'ALAT', value: 30, unit: 'U/l', ref: '< 45', history: [28, 32, 29, 30], status: 'normal' },
                        { name: 'ASAT', value: 25, unit: 'U/l', ref: '< 35', history: [24, 26, 25, 25], status: 'normal' },
                        { name: 'Gamma-GT', value: 45, unit: 'U/l', ref: '< 55', history: [48, 44, 46, 45], status: 'normal' },
                        { name: 'Alk. Fosfatase', value: 70, unit: 'U/l', ref: '< 115', history: [72, 68, 71, 70], status: 'normal' },
                        { name: 'LDH', value: 180, unit: 'U/l', ref: '< 250', history: [185, 178, 182, 180], status: 'normal' }
                    ]
                },
                markers: {
                    id: 'markers',
                    label: 'Tumormarkers & Ontsteking',
                    description: 'Specifieke waarden voor oncologische follow-up (CEA) en infectie (CRP).',
                    interpretation: 'Dit is het belangrijkste onderdeel van de follow-up. Het CEA is 2.1, wat laag en stabiel is (ver onder de grens van 5.0). Het CRP is nauwelijks meetbaar (<1). Deze combinatie bevestigt een rustig beeld zonder activiteit van de ziekte.',
                    metrics: [
                        { name: 'CEA', value: 2.1, unit: 'µg/l', ref: '< 5.0', history: [2.3, 2.0, 2.2, 2.1], status: 'normal' },
                        { name: 'CRP', value: '<1', unit: 'mg/l', ref: '< 5', history: [2, 1, 1, 1], status: 'normal', isText: true }
                    ]
                }
            }
        };

        const dates = ['Aug 2025', 'Okt 2025', 'Dec 2025', '11 Feb 2026']; // Simulated timeline ending on report date
        let currentCategory = 'markers'; // Default view
        let trendChartInstance = null;

        // --- DOM ELEMENTS ---
        const navContainer = document.getElementById('categoryNav');
        const listContainer = document.getElementById('valuesList');
        const chartTitle = document.getElementById('chartTitle');
        const interpretationText = document.getElementById('interpretationText');

        // --- INITIALIZATION ---
        function initDashboard() {
            renderNavigation();
            updateDashboard('markers'); // Start with most important
        }

        // --- RENDER FUNCTIONS ---

        function renderNavigation() {
            navContainer.innerHTML = '';
            Object.values(medicalData.categories).forEach(cat => {
                const btn = document.createElement('button');
                btn.className = `px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 border ${
                    cat.id === currentCategory 
                    ? 'bg-teal-600 text-white border-teal-600 shadow-md' 
                    : 'bg-white text-slate-600 border-slate-200 hover:bg-slate-50 hover:text-teal-600'
                }`;
                btn.textContent = cat.label;
                btn.onclick = () => updateDashboard(cat.id);
                navContainer.appendChild(btn);
            });
        }

        function updateDashboard(categoryId) {
            currentCategory = categoryId;
            renderNavigation(); // Re-render to update active state
            
            const category = medicalData.categories[categoryId];
            
            // Update Text
            chartTitle.textContent = `Trendanalyse: ${category.label}`;
            interpretationText.textContent = category.interpretation;
            
            // Re-trigger animation on text
            const block = document.getElementById('interpretationBlock');
            block.classList.remove('fade-in');
            void block.offsetWidth; // trigger reflow
            block.classList.add('fade-in');

            // Update List
            renderList(category.metrics);

            // Update Chart
            updateChart(category.metrics);
        }

        function renderList(metrics) {
            listContainer.innerHTML = '';
            metrics.forEach(metric => {
                const item = document.createElement('div');
                item.className = 'p-4 border-b border-slate-100 hover:bg-teal-50 transition-colors duration-150 last:border-0';
                
                // Determine color based on status (simplified logic for this demo, usually involves range check)
                const valueColor = 'text-teal-700'; 
                const icon = '&#10003;'; // Checkmark

                item.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="font-semibold text-slate-800">${metric.name}</div>
                            <div class="text-xs text-slate-500 mt-1">Ref: ${metric.ref}</div>
                        </div>
                        <div class="text-right">
                            <div class="text-xl font-bold ${valueColor}">${metric.value} <span class="text-sm font-normal text-slate-400">${metric.unit}</span></div>
                            <div class="text-xs text-green-600 font-medium flex items-center justify-end mt-1">
                                <span class="mr-1 text-[10px] border border-green-200 bg-green-50 px-1 rounded">NORMAAL</span>
                            </div>
                        </div>
                    </div>
                `;
                listContainer.appendChild(item);
            });
        }

        function updateChart(metrics) {
            const ctx = document.getElementById('trendChart').getContext('2d');
            
            // Filter out metrics that are text-only (like <1 or >90) for the line chart, unless we parse them
            const plotMetrics = metrics.filter(m => !m.isText);

            // Generate datasets
            const datasets = plotMetrics.map((m, index) => {
                // Generate a distinct color from teal palette variants
                const hue = 170 + (index * 20); 
                const color = `hsl(${hue}, 70%, 40%)`;
                const bg = `hsl(${hue}, 70%, 90%)`;

                return {
                    label: m.name,
                    data: m.history,
                    borderColor: color,
                    backgroundColor: bg,
                    borderWidth: 2,
                    pointBackgroundColor: '#fff',
                    pointBorderColor: color,
                    pointRadius: 4,
                    pointHoverRadius: 6,
                    tension: 0.3, // Smooth curves
                    fill: false
                };
            });

            if (trendChartInstance) {
                trendChartInstance.destroy();
            }

            trendChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            align: 'start',
                            labels: {
                                boxWidth: 12,
                                usePointStyle: true,
                                font: {
                                    family: 'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont'
                                }
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: 'rgba(255, 255, 255, 0.95)',
                            titleColor: '#1e293b',
                            bodyColor: '#334155',
                            borderColor: '#e2e8f0',
                            borderWidth: 1,
                            padding: 10,
                            callbacks: {
                                label: function(context) {
                                    return ` ${context.dataset.label}: ${context.parsed.y}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false, // Better visibility for blood ranges
                            grid: {
                                color: '#f1f5f9'
                            },
                            ticks: {
                                font: {
                                    size: 11
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    },
                    interaction: {
                        mode: 'nearest',
                        axis: 'x',
                        intersect: false
                    }
                }
            });
        }

        // Start App
        window.addEventListener('DOMContentLoaded', initDashboard);

    </script>
</body>
</html>